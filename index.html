<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript" src="bundle.js"></script>
		<script type="text/javascript" id='runtimeLibCode' src="lib.js"></script>
		<script>
			window.onload = function () {
				var iota = require('iota');
				var $ = document.querySelectorAll.bind(document);

				var inputField = $('#input')[0];
				var astField = $('#ast')[0];
				var jsField = $('#js')[0];

				function update () {
					try {
						astField.value = JSON.stringify(iota.parse(inputField.value), null, 4);
						jsField.value = iota.compile(inputField.value);
					} catch (e) {
						astField.value = e;
						jsField.value = "";
					}
					// $('#result')[0].value = eval(js);
				}

				inputField.addEventListener("keyup", update);

				inputField.value = "fact := method(n, if (n == 0, 1, n * fact (n - 1)))\nwriteln(fact(5))";
				update();

			};
		</script>
		<title>Iota Demo</title>
	</head>
	<body>
		<h1>Iota Demo</h1>
		<p>Iota is a source-to-source compiler that translates <a href="http://iolanguage.org/">Io</a> code into JavaScript.</p>
		<textarea id="input" rows="5" cols="30" placeholder="Your Io code here"></textarea>
		<br/>
		<textarea id="ast" readonly rows="15" cols="30" placeholder="Compiled JavaScript"></textarea>
		<br/>
		<textarea id="js" readonly rows="10" cols="30" placeholder="Syntax Tree"></textarea>
		<br/>
		<!-- <textarea id="result" readonly rows="1" cols="30" placeholder="Result"></textarea> -->
		<h6>Check out the project page <a href="https://github.com/dariusf/iota">here</a>.</h6>
	</body>
</html>
