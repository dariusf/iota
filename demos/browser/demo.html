<!doctype html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script type="text/javascript" src="bundle.js"></script>
		<script type="text/javascript" id='runtimeLibCode' src="lib.js"></script>
		<script>
			window.onload = function () {
				var iota = require('iota');
				var $ = document.querySelectorAll.bind(document);

				var inputField = $('#input')[0];
				var outputField = $('#output')[0];

				function update () {
					try {
						var parsed = iota.parse(inputField.value);
						outputField.value = parsed;
					} catch (e) {
						outputField.value = e;
					}
					// $('#result')[0].value = eval(parsed);
				}

				inputField.addEventListener("keyup", update);

				inputField.value = "fact := method(n, if (n == 0, 1, n * fact (n - 1)))\nwriteln(fact(5))";
				update();

			};
		</script>
	</head>
	<body>
		<h1>Iota Demo</h1>
		<textarea id="input" rows="5" cols="30" placeholder="Your Io code here"></textarea>
		<br/>
		<textarea id="output" readonly rows="10" cols="30" placeholder="Compiled JavaScript"></textarea>
		<br/>
		<!-- <textarea id="result" readonly rows="1" cols="30" placeholder="Result"></textarea> -->
	</body>
</html>
